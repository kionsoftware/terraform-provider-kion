---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "kion_gcp_account Resource - terraform-provider-kion"
subcategory: ""
description: |-
  Creates or imports a Google Cloud Project and adds it to a Kion project or the Kion account cache.
  If create_mode is set to import, an existing project will be imported into Kion, otherwise if create_mode is set to create, a new GCP Project will be created.  If project_id is provided the account will be added to the corresponding project, otherwise the account will be added to the account cache.
  Once added, an account can be moved between projects or in and out of the account cache by changing the project_id.  When moving accounts between projects, use move_project_settings to control how financials will be treated between the old and new project.
  When importing an existing Kion account into terraform state (different from using terraform to import an existing GCP Project into Kion), you must use the account_id= or account_cache_id= ID prefix to indicate whether the ID is an account ID or a cached account ID.
  For example:
  terraform import kion_gcp_account.test-account account_id=123
  terraform import kion_gcp_account.test-cached-account account_cache_id=321
  
  NOTE: This resource requires Kion v3.8.4 or greater.
---

# kion_gcp_account (Resource)

Creates or imports a Google Cloud Project and adds it to a Kion project or the Kion account cache.

If `create_mode` is set to import, an existing project will be imported into Kion, otherwise if `create_mode` is set to create, a new GCP Project will be created.  If `project_id` is provided the account will be added to the corresponding project, otherwise the account will be added to the account cache.

Once added, an account can be moved between projects or in and out of the account cache by changing the `project_id`.  When moving accounts between projects, use `move_project_settings` to control how financials will be treated between the old and new project.

When importing an existing Kion account into terraform state (different from using terraform to import an existing GCP Project into Kion), you must use the `account_id=` or `account_cache_id=` ID prefix to indicate whether the ID is an account ID or a cached account ID.

For example:

    terraform import kion_gcp_account.test-account account_id=123
    terraform import kion_gcp_account.test-cached-account account_cache_id=321

**NOTE:** This resource requires Kion v3.8.4 or greater.

## Example Usage

```terraform
# Create a new GCP project with all available options
resource "kion_gcp_account" "complete_example" {
  name                    = "Production GCP Project"
  create_mode            = "create"
  google_cloud_project_id = "prod-project-123456"
  payer_id               = 1

  # Optional configurations
  account_alias          = "prod-gcp"
  account_type_id        = 1
  google_cloud_parent_name = "folders/987654321"
  skip_access_checking   = false

  # Project placement and financial settings
  project_id             = 42
  start_datecode        = "2024-01"

  # Settings for moving between projects
  move_project_settings {
    financials    = "move"
    move_datecode = 202401
  }

  # Labels for categorization
  labels = {
    environment = "production"
    team        = "platform"
    cost_center = "12345"
  }
}

# Import an existing GCP project into a Kion project
resource "kion_gcp_account" "import_example" {
  name                    = "Existing Dev Project"
  create_mode            = "import"
  google_cloud_project_id = "dev-project-654321"
  payer_id               = 1
  project_id             = 43
  start_datecode        = "2024-01"

  labels = {
    environment = "development"
    imported    = "true"
  }
}

# Create a new GCP project in the account cache
resource "kion_gcp_account" "cache_example" {
  name                    = "Staging GCP Project"
  create_mode            = "create"
  google_cloud_project_id = "staging-project-789012"
  payer_id               = 1

  account_alias          = "staging-gcp"
  google_cloud_parent_name = "organizations/123456789"

  labels = {
    environment = "staging"
    managed_by  = "kion"
  }
}

# Example of moving a project between Kion projects
resource "kion_gcp_account" "move_example" {
  name                    = "Project to Move"
  create_mode            = "create"
  google_cloud_project_id = "moving-project-345678"
  payer_id               = 1
  project_id             = 44
  start_datecode        = "2024-01"

  move_project_settings {
    financials    = "preserve"  # Keep financial history in the old project
  }
}

# Output examples
output "prod_project_id" {
  value = kion_gcp_account.complete_example.id
}

output "prod_project_location" {
  value = kion_gcp_account.complete_example.location
}

output "imported_project_id" {
  value = kion_gcp_account.import_example.id
}

output "staging_project_created_at" {
  value = kion_gcp_account.cache_example.created_at
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `create_mode` (String) One of "create" or "import".  If "create", Kion will attempt to create a new Google Cloud Project.  If "import", Kion will import the existing Google Cloud Project as specified by google_cloud_project_id.
- `name` (String) The name of the Google Cloud account within Kion.
- `payer_id` (Number) The ID of the billing source containing billing data for this account.

### Optional

- `account_alias` (String) Account alias is an optional short unique name that helps identify the account within Kion.
- `account_type_id` (Number) An ID representing the account type within Kion.
- `google_cloud_parent_name` (String) The GCP resource identifier of the parent of this GCP Project.
- `google_cloud_project_id` (String) The Google Cloud project ID.
- `labels` (Map of String) A map of labels to assign to the account. The labels must already exist in Kion.
- `last_updated` (String)
- `move_project_settings` (Block Set, Max: 1) Parameters used when moving an account between Kion projects.  These settings are ignored unless moving an account. (see [below for nested schema](#nestedblock--move_project_settings))
- `project_id` (Number) The ID of the Kion project to place this account within.  If empty, the account will be placed within the account cache.
- `skip_access_checking` (Boolean) True to skip periodic access checking on the account.
- `start_datecode` (String) Date when the Google Cloud account will starting submitting payments against a funding source (YYYY-MM).  Required if placing an account within a project.

### Read-Only

- `created_at` (String)
- `id` (String) The ID of this resource.
- `location` (String) Where the account is attached.  Either "project" or "cache".

<a id="nestedblock--move_project_settings"></a>
### Nested Schema for `move_project_settings`

Optional:

- `financials` (String) One of "move" or "preserve".  If "move", financial history will be moved to the new project beginning on the date specified by the move_datecode parameter.  If "preserve", financial history will be preserved on the current project.
- `move_datecode` (Number) The start date to use when moving financial data in YYYYMM format.  This only applies when financials is set to move.  If provided, only financial data from this date to the current month will be moved to the new project.  If omitted or 0, all financial data will be moved to the new project.
