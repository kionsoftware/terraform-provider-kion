---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "kion_billing_source_aws Resource - terraform-provider-kion"
subcategory: ""
description: |-
  Creates and manages an AWS commercial billing source.
  AWS billing sources enable cost management and account management capabilities by connecting Kion to AWS billing data. This resource creates commercial AWS billing sources (account type 1).
  WARNING: Updates to this resource use a private API endpoint (/v1/payer) that may change without notice. Use at your own risk.
---

# kion_billing_source_aws (Resource)

Creates and manages an AWS commercial billing source.

AWS billing sources enable cost management and account management capabilities by connecting Kion to AWS billing data. This resource creates commercial AWS billing sources (account type 1).

**WARNING**: Updates to this resource use a private API endpoint (/v1/payer) that may change without notice. Use at your own risk.

## Example Usage

```terraform
# Example: Basic AWS billing source with CUR reports
resource "kion_billing_source_aws" "example" {
  name               = "Production AWS Billing"
  aws_account_number = "123456789012"
  billing_start_date = "2024-01"
  account_creation   = true

  # CUR configuration
  billing_report_type = "cur"
  cur_bucket          = "my-billing-reports-bucket"
  cur_bucket_region   = "us-east-1"
  cur_name            = "my-cost-and-usage-report"
  cur_prefix          = "reports"
}

# Example: AWS billing source with FOCUS reports
resource "kion_billing_source_aws" "focus_example" {
  name               = "AWS with FOCUS Reports"
  aws_account_number = "987654321098"
  billing_start_date = "2024-01"

  # FOCUS billing configuration
  billing_report_type                 = "focus"
  focus_billing_bucket_account_number = "987654321098"
  focus_billing_report_bucket         = "my-focus-reports-bucket"
  focus_billing_report_bucket_region  = "us-east-1"
  focus_billing_report_name           = "my-focus-report"
  focus_billing_report_prefix         = "focus-reports"
}

# Example: AWS billing source with IAM role access
resource "kion_billing_source_aws" "role_based" {
  name                          = "AWS with IAM Role Access"
  aws_account_number            = "111222333444"
  billing_bucket_account_number = "555666777888" # Different account holds the billing data
  billing_start_date            = "2024-01"

  # Use IAM role instead of access keys
  bucket_access_role = "BillingReportAccessRole"
  linked_role        = "OrganizationAccountAccessRole"

  # CUR configuration
  billing_report_type = "cur"
  cur_bucket          = "cross-account-billing-reports"
  cur_bucket_region   = "us-east-1"
  cur_name            = "organization-cur-report"
  cur_prefix          = "cur"
}

# Example: AWS billing source with access keys
resource "kion_billing_source_aws" "key_based" {
  name               = "AWS with Access Keys"
  aws_account_number = "999888777666"
  billing_start_date = "2024-01"

  # Authentication via access keys
  key_id     = var.aws_access_key_id
  key_secret = var.aws_secret_access_key

  # Skip validation during creation
  skip_validation = true

  # DBR configuration
  billing_report_type     = "dbrrt"
  detailed_billing_bucket = "detailed-billing-reports"
  billing_region          = "us-west-2"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `aws_account_number` (String) The AWS account number of the master billing account.
- `billing_start_date` (String) The start date for billing data collection in YYYY-MM format.
- `name` (String) The name of the billing source.

### Optional

- `account_creation` (Boolean) When true, Kion is able to automatically create accounts in this billing source.
- `billing_bucket_account_number` (String) The AWS account number of the S3 bucket holding the billing reports. Defaults to aws_account_number if not specified.
- `billing_region` (String) The region of the S3 bucket holding billing reports (both CUR and DBR reports).
- `billing_report_type` (String) The billing report type to use. Options: 'cur' (AWS Cost and Usage Report), 'dbrrt' (AWS Detailed Billing Report with Resources and Tags), 'focus' (FOCUS billing reports).
- `bucket_access_role` (String) An alternate IAM role for accessing the billing buckets (optional).
- `cur_bucket` (String) The name of the S3 bucket containing the Cost and Usage Reports. Required if billing_report_type is 'cur'.
- `cur_bucket_region` (String) The region of the S3 bucket containing the Cost and Usage Reports. Required if billing_report_type is 'cur'.
- `cur_name` (String) The name of the Cost and Usage Report. Required if billing_report_type is 'cur'.
- `cur_prefix` (String) The report prefix for the Cost and Usage Reports. Required if billing_report_type is 'cur'.
- `detailed_billing_bucket` (String) The name of the S3 bucket containing the detailed billing reports. Required if billing_report_type is 'dbrrt'.
- `focus_billing_bucket_account_number` (String) The AWS account number of the S3 bucket holding the FOCUS reports.
- `focus_billing_report_bucket` (String) The name of the S3 bucket containing the FOCUS reports.
- `focus_billing_report_bucket_region` (String) The region of the S3 bucket containing the FOCUS reports.
- `focus_billing_report_name` (String) The name of the FOCUS billing report.
- `focus_billing_report_prefix` (String) The prefix for the FOCUS billing reports.
- `focus_bucket_access_role` (String) An alternate IAM role for accessing the FOCUS billing buckets (optional).
- `key_id` (String, Sensitive) The AWS Access Key ID used to access the billing S3 bucket.
- `key_secret` (String, Sensitive) The AWS Secret Access Key used to access the billing S3 bucket.
- `linked_role` (String) The name of an existing IAM role that has full administrator permissions. This role will be prefilled as the linked role when creating or importing new accounts under this billing source.
- `skip_validation` (Boolean) When true, will skip validating the connection to the billing source during creation.

### Read-Only

- `id` (String) The ID of this resource.
- `use_focus_reports` (Boolean) True if billing source is configured to read FOCUS reports.
- `use_proprietary_reports` (Boolean) True if billing source is configured to read proprietary billing reports from AWS (CUR, DBRRT).
